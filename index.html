<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KUZEY GALAXY | ULTRA-OS v63.0 SINGLE-CORE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --ac: #00ffff; 
            --ac2: #ff4400; 
            --ac-green: #00ff66;
            --ac-dim: rgba(0, 255, 255, 0.15);
            --sh: 0 0 30px rgba(0, 255, 255, 0.5);
            --pnl: rgba(5, 12, 20, 0.85);
            --gold: #ffd700;
            --font-main: 'Orbitron', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; user-select: none; }
        
        body { 
            background: #000; color: #fff; font-family: var(--font-code);
            height: 100vh; overflow: hidden; 
            background: radial-gradient(circle at center, #050505 0%, #000 100%);
        }

        /* --- İMLEÇ --- */
        #c { position: fixed; inset: 0; z-index: 0; filter: blur(1px); pointer-events: none; }
        #ptr { position: fixed; top:0; left:0; width: 6px; height: 6px; background: #fff; border-radius: 50%; z-index: 999999; pointer-events: none; mix-blend-mode: difference; box-shadow: 0 0 10px #fff; }
        #aura { position: fixed; top:0; left:0; width: 80px; height: 80px; border: 2px dotted var(--ac); border-radius: 50%; z-index: 999998; pointer-events: none; opacity: 0.5; transition: transform 0.1s ease-out, top 0.1s ease-out, left 0.1s ease-out; animation: spin 8s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- GİRİŞ EKRANI --- */
        #gate { position: fixed; inset: 0; z-index: 50000; display: flex; align-items: center; justify-content: center; transition: 1s cubic-bezier(0.7,0,0.3,1); }
        .auth-box { 
            width: 450px; padding: 50px; background: rgba(0, 25, 40, 0.9); border: 1px solid var(--ac); 
            box-shadow: 0 0 80px rgba(0, 255, 255, 0.3), inset 0 0 30px rgba(0,255,255,0.1);
            clip-path: polygon(0 15%, 15% 0, 100% 0, 100% 85%, 85% 100%, 0 100%); 
            position: relative; backdrop-filter: blur(10px);
        }
        .scan-line { position: absolute; top:0; left:0; width:100%; height:3px; background: linear-gradient(90deg, transparent, var(--ac), transparent); animation: scan 2s infinite linear; opacity:0.7; }
        @keyframes scan { 0% {top:0;} 100% {top:100%;} }
        
        .in-grp label { font-size: 10px; color: var(--ac); letter-spacing: 2px; text-shadow: 0 0 5px var(--ac); }
        .in-grp input { width: 100%; padding: 12px; background: rgba(0,0,0,0.6); border: 1px solid #333; border-left: 3px solid var(--ac); color: #fff; outline: none; font-family: var(--font-code); transition: 0.3s; }
        .in-grp input:focus { border-color: var(--ac); box-shadow: var(--sh); background: rgba(0, 255, 255, 0.05); }
        .b-at { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--ac-dim), transparent); border: 1px solid var(--ac); color: var(--ac); font-family: var(--font-main); cursor: pointer; transition: 0.3s; margin-top: 10px; letter-spacing: 3px; font-weight: bold; clip-path: polygon(0 0, 95% 0, 100% 20%, 100% 100%, 5% 100%, 0 80%); }
        .b-at:hover { background: var(--ac); color: #000; box-shadow: var(--sh); transform: scale(1.05); }

        /* --- OS ANA YAPI --- */
        #os { display: none; height: 100vh; grid-template-columns: 80px 1fr; opacity: 0; transition: opacity 1s; }
        
        .sidebar { background: linear-gradient(180deg, rgba(0,10,20,0.9), rgba(0,0,0,0.8)); border-right: 1px solid rgba(0,255,255,0.2); display: flex; flex-direction: column; align-items: center; padding-top: 30px; z-index: 100; backdrop-filter: blur(10px); }
        .nav-icon { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; color: #666; font-size: 20px; margin-bottom: 25px; transition: 0.4s; border-radius: 12px; position: relative; overflow: hidden; }
        .nav-icon::before { content:''; position:absolute; inset:0; background: var(--ac); opacity:0; transition:0.3s; z-index:-1; filter: blur(10px); }
        .nav-icon:hover::before, .nav-icon.active::before { opacity:0.3; }
        .nav-icon:hover, .nav-icon.active { color: var(--ac); text-shadow: var(--sh); transform: scale(1.15); border: 1px solid var(--ac); box-shadow: var(--sh); }

        /* --- 4D SAHNE --- */
        #scene-wrap { position: relative; height: 100vh; width: 100%; overflow: hidden; perspective: 1500px; }
        #scene-container { position: relative; height: 100%; width: 100%; transform-style: preserve-3d; transition: transform 0.1s ease-out; }
        
        #space-grid {
            position: absolute; bottom: -50vh; left: -50%; width: 200%; height: 200vh;
            background-image: linear-gradient(rgba(0, 255, 255, 0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.3) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px; transform-style: preserve-3d; transform: rotateX(85deg) translateZ(-200px);
            mask-image: radial-gradient(circle at 50% 0%, black 0%, transparent 80%); animation: gridMove 10s linear infinite; pointer-events: none; z-index: -2;
        }
        @keyframes gridMove { from { background-position: 0 0; } to { background-position: 0 100px; } }

        #black-hole-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) translateZ(-500px) rotateX(15deg); width: 800px; height: 800px; pointer-events: none; z-index: -1; transform-style: preserve-3d; }
        .bh-event-horizon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 150px; height: 150px; background: #000; border-radius: 50%; box-shadow: 0 0 50px #000, inset 0 0 100px #000; z-index: 10; }
        .bh-lensing { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 170px; height: 170px; border-radius: 50%; box-shadow: 0 0 20px 5px rgba(255, 200, 100, 0.8); filter: blur(8px); z-index: 9; }
        .bh-accretion-disk { position: absolute; top: 50%; left: 50%; width: 700px; height: 700px; border-radius: 50%; transform: translate(-50%, -50%) rotateX(75deg); background: radial-gradient(ring, rgba(0,0,0,0) 30%, var(--ac2) 45%, var(--gold) 55%, var(--ac) 65%, rgba(0,0,0,0) 75%); filter: blur(10px) brightness(1.5); box-shadow: 0 0 100px var(--ac2); animation: spinDisk 20s linear infinite; }
        @keyframes spinDisk { from { transform: translate(-50%, -50%) rotateX(75deg) rotate(0deg); } to { transform: translate(-50%, -50%) rotateX(75deg) rotate(360deg); } }

        #orbit-system { position: absolute; top: 50%; left: 50%; width: 1000px; height: 1000px; transform-style: preserve-3d; transform: translate(-50%, -50%) translateZ(-500px) rotateX(75deg); animation: orbitBig 60s linear infinite; z-index: 0; }
        @keyframes orbitBig { from { transform: translate(-50%, -50%) translateZ(-500px) rotateX(75deg) rotate(0deg); } to { transform: translate(-50%, -50%) translateZ(-500px) rotateX(75deg) rotate(360deg); } }
        .planet-earth { position: absolute; top: 0; left: 50%; width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(45deg, #1a237e, #0288d1, #fff); transform: translate(-50%, -50%) translateX(400px); box-shadow: inset -5px -5px 10px rgba(0,0,0,0.8), 0 0 10px rgba(0, 150, 255, 0.5); transform-style: preserve-3d; animation: spinEarth 10s linear infinite; }
        @keyframes spinEarth { from { transform: translate(-50%, -50%) translateX(400px) rotateY(0deg); } to { transform: translate(-50%, -50%) translateX(400px) rotateY(360deg); } }
        .moon-orbit { position: absolute; top: 50%; left: 50%; width: 100px; height: 100px; transform-style: preserve-3d; transform: translate(-50%, -50%); animation: orbitMoon 5s linear infinite; }
        @keyframes orbitMoon { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        .planet-moon { position: absolute; top: 0; left: 50%; width: 10px; height: 10px; border-radius: 50%; background: #aaa; transform: translate(-50%, -50%) translateX(30px); box-shadow: inset -2px -2px 5px rgba(0,0,0,0.8); }

        #view-track { display: flex; height: 100%; width: 100%; transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1); transform-style: preserve-3d; }
        .view { min-width: 100%; height: 100%; overflow-y: auto; padding: 30px; transform-style: preserve-3d; }
        
        .widget { 
            background: rgba(10, 20, 30, 0.6); border: 1px solid rgba(0,255,255,0.2); 
            padding: 20px; position: relative; overflow: hidden; display: flex; flex-direction: column;
            backdrop-filter: blur(15px); border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transform-style: preserve-3d; transition: transform 0.3s, border-color 0.3s;
        }
        .widget:hover { transform: translateZ(20px) scale(1.02); border-color: var(--ac); box-shadow: var(--sh); }
        .widget h3 { font-family: var(--font-main); color: var(--ac); font-size: 14px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; text-shadow: 0 0 5px var(--ac-dim); }

        .profile-card { display: flex; gap: 20px; align-items: center; }
        .level-badge { width: 70px; height: 70px; background: radial-gradient(circle, #222, #000); border: 2px solid var(--ac2); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 0 15px var(--ac2); }
        .lvl-num { font-family: 'Orbitron'; font-size: 24px; font-weight: 900; color: #fff; line-height: 1; }
        .lvl-txt { font-size: 8px; color: var(--ac2); font-weight: bold; }
        
        .xp-bar-bg { width: 100%; height: 8px; background: #222; border-radius: 4px; overflow: hidden; margin-top: 5px; border: 1px solid #444; }
        .xp-bar-fill { height: 100%; background: linear-gradient(90deg, var(--ac), var(--ac-green)); width: 0%; transition: 1s ease-out; }

        .ach-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 10px; }
        .ach-item { aspect-ratio: 1; background: rgba(0,0,0,0.5); border: 1px solid #333; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: 0.3s; position: relative; filter: grayscale(1); opacity: 0.5; }
        .ach-item.unlocked { filter: grayscale(0); opacity: 1; border-color: var(--gold); box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); background: rgba(255, 215, 0, 0.1); }
        .ach-item i { font-size: 18px; color: var(--gold); }
        .ach-item:hover::after { content: attr(data-title); position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); background: var(--ac); color: #000; padding: 4px 8px; font-size: 10px; white-space: nowrap; border-radius: 4px; pointer-events: none; font-weight: bold; z-index: 10; }

        .mission-panel { grid-column: span 3; background: linear-gradient(90deg, rgba(30, 0, 0, 0.6), rgba(0, 0, 0, 0.8)); border: 1px solid var(--ac2); position: relative; }
        .m-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .m-badge { padding: 3px 8px; border-radius: 3px; font-size: 10px; font-weight: bold; font-family: var(--font-main); }
        .m-badge.easy { background: var(--ac-green); color: #000; }
        .m-badge.medium { background: var(--gold); color: #000; }
        .m-badge.hard { background: var(--ac2); color: #fff; }
        
        .dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: auto auto auto 1fr; gap: 25px; padding-bottom: 50px; transform-style: preserve-3d; }
        .hero-w { grid-column: span 2; background: linear-gradient(135deg, rgba(0,60,60,0.8), rgba(0,0,0,0.9)); display: flex; flex-direction: column; justify-content: center; gap: 15px; }
        .profile-img { width: 70px; height: 70px; border-radius: 50%; border: 3px solid var(--ac); object-fit: cover; box-shadow: var(--sh); }
        .terminal { font-family: 'JetBrains Mono'; font-size: 11px; color: #0f0; opacity: 0.8; overflow: hidden; background: rgba(0,0,0,0.3); padding: 5px; border: 1px solid #222; }
        .chat-log { height: 350px; overflow-y: auto; margin-bottom: 15px; border: 1px solid var(--ac-dim); padding: 15px; background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); }
        
        .msg.user { background: linear-gradient(90deg, rgba(0, 255, 255, 0.2), transparent); border-left: 3px solid var(--ac); padding: 8px; margin-bottom: 8px; }
        .msg.ai { background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), transparent); border-left: 3px solid var(--gold); color: #ddd; padding: 8px; margin-bottom: 8px; }
        .msg.ai img { max-width: 100%; border: 1px solid var(--ac); border-radius: 4px; margin-top: 5px; box-shadow: 0 0 10px rgba(0,255,255,0.3); }
        .msg.ai pre { background: #111; padding: 10px; border-radius: 5px; border: 1px solid #333; overflow-x: auto; font-family: 'JetBrains Mono'; color: #0f0; margin-top: 5px; }
        .msg.ai code { font-family: 'JetBrains Mono'; }

        .comm-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(0, 255, 255, 0.1); border: 1px solid var(--ac); margin-bottom: 20px; backdrop-filter: blur(5px); }
        .forum-grid { display: grid; grid-template-columns: 1fr; gap: 20px; max-width: 900px; margin: 0 auto; }
        .post-card { background: rgba(10, 20, 30, 0.8); border: 1px solid #333; padding: 15px; transition: 0.3s; position: relative; overflow: hidden; }
        .post-card:hover { border-color: var(--ac); box-shadow: 0 0 15px rgba(0,255,255,0.2); }
        .post-meta { display: flex; justify-content: space-between; font-size: 10px; color: #666; margin-bottom: 10px; }
        .post-author { color: var(--ac); font-weight: bold; }
        .post-content { font-size: 13px; line-height: 1.5; margin-bottom: 15px; color: #ddd; }
        .post-actions { display: flex; gap: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; }
        .act-btn { cursor: pointer; color: #888; font-size: 12px; transition: 0.2s; display: flex; align-items: center; gap: 5px; }
        .act-btn:hover, .act-btn.active { color: var(--ac2); }
        .comments-sec { margin-top: 10px; padding-left: 15px; border-left: 2px solid #333; display: none; }
        .comment-item { margin-top: 8px; font-size: 11px; color: #aaa; background: rgba(0,0,0,0.3); padding: 5px; }

        .lb-item { display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid rgba(255,255,255,0.1); font-size:12px; }
        .lb-item:last-child { border-bottom:none; }
        .lb-rank { width:25px; color:var(--gold); font-weight:bold; }
        .lb-user { flex:1; color:#fff; }
        .lb-xp { color:var(--ac); font-family:var(--font-code); }
        
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border: 1px solid var(--ac); box-shadow: var(--sh); background:#000; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: linear-gradient(var(--ac), var(--ac2)); border-radius: 3px; }
    </style>
</head>
<body>

    <div id="ptr"></div>
    <div id="aura"></div>
    <canvas id="c"></canvas>
    <audio id="bgm" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="gate">
        <div class="auth-box">
            <div class="scan-line"></div>
            <h1 style="font-family:'Orbitron'; text-align:center; color:#fff; text-shadow:var(--sh); margin-bottom:30px; font-size: 2rem;">KUZEY <span style="color:var(--ac)">OS</span> <small style="font-size:12px; color:var(--ac2)">v63.0 SINGLE-CORE</small></h1>
            <div id="login-form">
                <div class="in-grp"><label>IDENTIFICATION</label><input type="text" id="u-in" placeholder="Kullanıcı Adı" autocomplete="off"></div>
                <div class="in-grp"><label>PASSCODE</label><input type="password" id="p-in" placeholder="Şifre" autocomplete="off"></div>
                <button onclick="Auth.login()" class="b-at">SİSTEME GİRİŞ</button>
                <div style="display:flex; justify-content:space-between; margin-top:15px;">
                    <button onclick="Auth.toggleReg()" style="background:none; border:none; color:#666; font-size:11px;">[ KAYIT OL ]</button>
                    <button onclick="Auth.guest()" style="background:none; border:none; color:var(--ac); font-size:11px;">> MİSAFİR PROTOKOLÜ <</button>
                </div>
            </div>
            <p id="msg" style="text-align:center; font-size:11px; margin-top:15px; height:15px; color:var(--ac); font-weight:bold; text-shadow:0 0 5px var(--ac);"></p>
        </div>
    </div>

    <div id="os">
        <aside class="sidebar">
            <div class="nav-icon active" onclick="Nav.go(0, this)"><i class="fas fa-microchip"></i></div>
            <div class="nav-icon" onclick="Nav.go(1, this)"><i class="fas fa-brain"></i></div>
            <div class="nav-icon" onclick="Nav.go(2, this)"><i class="fas fa-envelope-open-text"></i></div>
            <div class="nav-icon" onclick="Nav.go(3, this)"><i class="fas fa-photo-video"></i></div>
            <div class="nav-icon" onclick="Nav.go(4, this)"><i class="fas fa-users"></i></div>
            <div style="margin-top:auto; margin-bottom:30px; font-family:'Orbitron'; font-size:12px; color:var(--ac); transform: rotate(-90deg); white-space:nowrap; letter-spacing:3px;">SYSTEM READY</div>
        </aside>

        <div id="scene-wrap">
            <div id="space-grid"></div>
            <main id="scene-container">
                
                <div id="black-hole-container">
                    <div class="bh-lensing"></div>
                    <div class="bh-event-horizon"></div>
                    <div class="bh-accretion-disk"></div>
                </div>

                <div id="orbit-system">
                    <div class="planet-earth">
                        <div class="moon-orbit">
                            <div class="planet-moon"></div>
                        </div>
                    </div>
                </div>

                <div id="view-track">
                    <section class="view dashboard-grid">
                        <div class="widget hero-w" style="transform: translateZ(30px);">
                            <div class="profile-card">
                                <div class="level-badge">
                                    <div class="lvl-num" id="u-lvl">1</div>
                                    <div class="lvl-txt">LEVEL</div>
                                </div>
                                <div style="flex:1;">
                                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                                        <h2 style="font-family:'Orbitron'; font-size:1.2rem; margin:0;">OP: <span id="op-name" style="color:var(--ac)">GUEST</span></h2>
                                        <small style="color:var(--gold)" id="u-rank">ACEMİ</small>
                                    </div>
                                    <div class="xp-bar-bg"><div id="xp-bar" class="xp-bar-fill"></div></div>
                                    <small style="color:#666; font-size:9px; margin-top:3px; display:block;" id="xp-text">0 / 1000 XP</small>
                                    <div style="font-size:9px; color:var(--ac2); text-align:right; margin-top:2px;" id="next-lvl-target">SONRAKİ HEDEF: 500 XP</div>
                                </div>
                                <img src="channels4_profile.jpg" class="profile-img" onerror="this.src='https://via.placeholder.com/70/0ff/000?text=OPR'">
                            </div>
                        </div>

                        <div class="widget" style="transform: translateZ(10px);">
                            <h3><i class="fas fa-clock"></i> SİSTEM ZAMANI</h3>
                            <div id="clock" style="font-size:32px; font-family:'Orbitron'; text-align:center; margin-top:10px;">00:00:00</div>
                            <div style="text-align:center; font-size:10px; color:#aaa; margin-top:5px;">ISTANBUL / TURKEY</div>
                        </div>

                        <div class="widget mission-panel" id="mission-ui" style="transform: translateZ(35px);">
                            <div class="m-header">
                                <span style="color:var(--ac); font-weight:bold; font-size:12px;"><i class="fas fa-crosshairs"></i> AKTİF GÖREV</span>
                                <span id="m-diff" class="m-badge easy">KOLAY</span>
                            </div>
                            <h2 id="m-desc" style="font-family:'Orbitron'; font-size:16px; margin-bottom:5px;">Sistem Yükleniyor...</h2>
                            <div style="display:flex; justify-content:space-between; font-size:10px; color:#aaa;">
                                <span id="m-reward">ÖDÜL: 0 XP</span>
                                <span id="m-time-text" style="color:var(--ac)">SÜRE: YOK</span>
                            </div>
                            <div style="margin-top:10px; text-align:right;">
                                <button onclick="Mission.complete('MANUAL')" class="b-at" style="padding:5px 10px; font-size:10px; width:auto; margin:0; display:none;" id="m-action-btn">MANUEL ROTA</button>
                            </div>
                        </div>

                        <div class="widget" style="transform: translateZ(10px);">
                            <h3><i class="fas fa-server"></i> SİSTEM DURUMU</h3>
                            <div style="font-size:11px; color:#aaa; margin-bottom:5px;">CPU YÜKÜ: <span id="cpu-txt" style="color:var(--ac)">12%</span></div>
                            <div class="terminal" style="margin-top:5px; height:60px;"><div id="matrix-code"></div></div>
                        </div>

                        <div class="widget" style="grid-row: span 2; transform: translateZ(25px);">
                            <h3><i class="fas fa-crown"></i> LİDERLİK TABLOSU</h3>
                            <div id="lb-list" style="overflow-y:auto; max-height:250px;"></div>
                        </div>

                        <div class="widget" style="grid-row: span 2; transform: translateZ(20px);">
                            <h3><i class="fas fa-trophy"></i> OPERASYON ROZETLERİ</h3>
                            <div class="ach-grid" id="ach-list"></div>
                        </div>
                        
                        <div class="widget" style="transform: translateZ(15px);">
                            <h3><i class="fas fa-music"></i> SONİK DALGA</h3>
                            <div style="text-align:center; margin-bottom:15px; color:var(--ac2);">KUZEY_HYPER_MIX.mp3</div>
                            <div class="visualizer">
                                <div class="v-bar" style="animation-duration:0.6s; background:var(--ac2)"></div><div class="v-bar" style="animation-duration:0.8s"></div><div class="v-bar" style="animation-duration:0.4s; background:var(--ac2)"></div>
                                <div class="v-bar" style="animation-duration:0.7s"></div><div class="v-bar" style="animation-duration:0.5s; background:var(--ac2)"></div>
                            </div>
                            <div style="display:flex; justify-content:center; gap:20px; margin-top:20px;">
                                <i class="fas fa-play" style="color:var(--ac); cursor:pointer; font-size:20px;" onclick="document.getElementById('bgm').play()"></i>
                                <i class="fas fa-pause" style="cursor:pointer; font-size:20px;" onclick="document.getElementById('bgm').pause()"></i>
                            </div>
                        </div>
                    </section>

                    <section class="view">
                        <div class="widget" style="height:100%; display:flex; flex-direction:column; transform: translateZ(40px);">
                            <h3><i class="fas fa-brain"></i> C.O.R.E. AI (ULTIMATE)</h3>
                            <div class="chat-log" id="ai-log" style="flex:1;">
                                <div class="msg ai">Sistemler çevrimiçi. Görsel oluşturabilirim ('... resmi çiz'), kod yazabilirim veya sohbet edebilirim.</div>
                            </div>
                            <div style="display:flex; gap:10px; margin-top:10px;">
                                <input type="text" id="ai-in" placeholder="Örnek: 'Bir uzay gemisi çiz' veya 'HTML kodu yaz'..." style="flex:1; padding:15px; background:rgba(0,0,0,0.5); border:1px solid var(--ac); color:#fff; font-family:var(--font-code);" onkeydown="if(event.key==='Enter') AI.process()">
                                <button class="b-at" style="width:120px; margin:0;" onclick="AI.process()">İLET</button>
                            </div>
                        </div>
                    </section>

                    <section class="view">
                        <div class="widget" style="max-width:700px; margin:0 auto; height:auto; transform: translateZ(30px);">
                            <h3><i class="fas fa-satellite-dish"></i> DERİN UZAY İLETİŞİMİ</h3>
                            <div class="in-grp">
                                <textarea id="c-msg" rows="6" placeholder="Mesajınızı buraya şifreleyin..." style="width:100%; background:rgba(0,0,0,0.7); color:#fff; border:1px solid var(--ac-dim); padding:15px; font-family:var(--font-code); resize:none;"></textarea>
                            </div>
                            <button class="b-at" id="send-btn" onclick="Comm.send()" style="font-size:16px;">ŞİFRELİ GÖNDERİMİ BAŞLAT</button>
                            <div id="c-stat" style="margin-top:15px; color:var(--gold); font-size:12px; text-align:center; height:20px;"></div>
                        </div>
                    </section>

                    <section class="view">
                        <h2 style="font-family:'Orbitron'; margin-bottom:20px; color:var(--ac2); text-align:center;">GÜVENLİ VİDEO AKIŞI</h2>
                        <div class="widget" style="text-align:center; padding:20px; border-color:var(--ac2); max-width:800px; margin:0 auto; transform: translateZ(30px);">
                            <div class="video-wrapper">
                                <iframe id="yt-player" src="https://www.youtube.com/embed/K8j7CaMKRF4?autoplay=1&mute=1" title="KUZEY GALAXY PLAYER" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
                                <div id="video-stat" style="color:var(--ac); font-size:10px;">DURUM: BAĞLANDI</div>
                                <button class="b-at" onclick="Media.forceReload()" style="width:auto; margin:0; font-size:10px; padding:5px 15px; border-color:var(--ac2); color:var(--ac2);">BAĞLANTIYI ZORLA / YENİLE</button>
                            </div>
                            <button class="b-at" onclick="window.open('https://www.youtube.com/channel/UC4TwM7_NxfCjsRsqD-gZmTw', '_blank')" style="width:200px; margin:20px auto 0; border-color:var(--ac);">KANALA GİT</button>
                        </div>
                    </section>

                    <section class="view">
                        <div class="comm-header">
                            <h2 style="font-family:'Orbitron'; color:var(--ac);">GLOBAL VERİ AĞI</h2>
                            <button class="b-at" style="width:auto; padding: 5px 20px; margin:0;" onclick="Community.togglePostForm()">+ YENİ VERİ GİRİŞİ</button>
                        </div>
                        
                        <div id="comm-form" class="widget" style="display:none; margin-bottom:20px; transform:translateZ(30px);">
                            <h3>VERİ OLUŞTUR</h3>
                            <input type="text" id="comm-title" placeholder="Başlık" style="background:#000; color:#fff; border:1px solid #333; padding:10px; margin-bottom:10px; width:100%;">
                            <textarea id="comm-body" rows="3" placeholder="İçerik..." style="background:#000; color:#fff; border:1px solid #333; padding:10px; width:100%;"></textarea>
                            <button class="b-at" onclick="Community.post()">YAYINLA</button>
                        </div>

                        <div class="forum-grid" id="comm-feed"></div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <script>
        let user = "GUEST", userXP = 0;
        const SFX = { hover: ()=>{}, click: ()=>{} }; 

        const LEVELS = [0, 500, 1500, 3000, 5000, 8000, 12000, 20000, 30000, 50000];
        const RANKS = ["ACEMİ", "ÇIRAK", "GÖZCÜ", "PİLOT", "KAPTAN", "KOMUTAN", "AMİRAL", "LORD", "EFENDİ", "TANRI"];
        const ACHS = ["fa-user", "fa-rocket", "fa-eye", "fa-satellite", "fa-meteor", "fa-robot", "fa-server", "fa-shield-alt", "fa-chess-king", "fa-infinity"];

        const InputHandler = {
            x: 0, y: 0,
            init() {
                window.addEventListener('mousemove', (e) => {
                    this.x = e.clientX; this.y = e.clientY;
                    const ptr = document.getElementById('ptr'), aura = document.getElementById('aura');
                    ptr.style.left = this.x + 'px'; ptr.style.top = this.y + 'px';
                    aura.style.left = (this.x - 40) + 'px'; aura.style.top = (this.y - 40) + 'px';
                    TiltEngine.updateFromMouse(this.x, this.y);
                });
            }
        };

        const TiltEngine = {
            container: document.getElementById('scene-container'),
            grid: document.getElementById('space-grid'),
            updateFromMouse(mx, my) {
                let nx = (mx / window.innerWidth - 0.5) * 2;
                let ny = (my / window.innerHeight - 0.5) * 2;
                this.container.style.transform = `rotateX(${ny * -5}deg) rotateY(${nx * 5}deg)`;
                this.grid.style.transform = `rotateX(85deg) translateZ(-200px) translateX(${nx * 20}px) translateY(${ny * 20}px)`;
            }
        };

        const Nav = {
            go(index, el) {
                SFX.click();
                document.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
                if(el) el.classList.add('active');
                document.getElementById('view-track').style.transform = `translateX(-${index * 100}%)`;
            }
        };

        const Canvas = {
            ctx: document.getElementById('c').getContext('2d'), w:0, h:0, stars:[], speed: 2,
            init() {
                this.resize(); window.addEventListener('resize', ()=>this.resize());
                for(let i=0; i<400; i++) this.stars.push(this.createStar());
                this.loop();
            },
            resize(){ this.w=this.ctx.canvas.width=innerWidth; this.h=this.ctx.canvas.height=innerHeight; },
            createStar(){ return {x:Math.random()*this.w-this.w/2, y:Math.random()*this.h-this.h/2, z:Math.random()*this.w, pz:Math.random()*this.w}; },
            loop(){
                let cx = window.innerWidth/2, cy = window.innerHeight/2;
                let dist = Math.sqrt(Math.pow((InputHandler.x-cx)/cx, 2) + Math.pow((InputHandler.y-cy)/cy, 2));
                this.speed = 2 + (dist * 10);
                this.ctx.fillStyle="rgba(0,0,0,0.3)"; this.ctx.fillRect(0,0,this.w,this.h);
                this.ctx.translate(this.w/2, this.h/2);
                this.stars.forEach(s=>{
                    s.z -= this.speed;
                    if(s.z <= 0) { s.x=Math.random()*this.w-this.w/2; s.y=Math.random()*this.h-this.h/2; s.z=this.w; s.pz=s.z; }
                    let sx = (s.x / s.z) * this.w; let sy = (s.y / s.z) * this.h;
                    let px = (s.x / s.pz) * this.w; let py = (s.y / s.pz) * this.h;
                    s.pz = s.z;
                    let size = (1 - s.z / this.w) * 3;
                    let c = Math.floor(255 * (1-s.z/this.w));
                    this.ctx.strokeStyle = `rgb(${c},${c},255)`; this.ctx.lineWidth = size;
                    this.ctx.beginPath(); this.ctx.moveTo(px,py); this.ctx.lineTo(sx,sy); this.ctx.stroke();
                });
                this.ctx.translate(-this.w/2, -this.h/2);
                requestAnimationFrame(()=>this.loop());
            }
        };

        const UserDB = {
            save(u, xp) {
                let db = JSON.parse(localStorage.getItem('KUZEY_USER_STATS') || "{}");
                db[u] = { xp: xp };
                localStorage.setItem('KUZEY_USER_STATS', JSON.stringify(db));
                Leaderboard.update(u, xp);
            },
            load(u) {
                let db = JSON.parse(localStorage.getItem('KUZEY_USER_STATS') || "{}");
                return db[u] ? db[u].xp : 0;
            }
        };

        const Leaderboard = {
            key: 'KUZEY_LB_DB',
            data: [],
            init() {
                let stored = localStorage.getItem(this.key);
                if(stored) this.data = JSON.parse(stored);
                else {
                    this.data = [
                        {u: 'KUZEY_ADMIN', xp: 50000},
                        {u: 'AI_CORE', xp: 35000},
                        {u: 'Cyber_Wolf', xp: 12000},
                        {u: 'Neon_Rider', xp: 5400}
                    ];
                    this.save();
                }
                this.render();
            },
            save() { localStorage.setItem(this.key, JSON.stringify(this.data)); },
            update(u, xp) {
                let found = false;
                this.data.forEach(p => { if(p.u === u) { p.xp = xp; found = true; } });
                if(!found) this.data.push({u: u, xp: xp});
                this.data.sort((a,b) => b.xp - a.xp);
                this.save(); this.render();
            },
            render() {
                const el = document.getElementById('lb-list');
                if(!el) return;
                el.innerHTML = "";
                this.data.forEach((p, i) => {
                    let color = "#fff";
                    if(i === 0) color = "var(--gold)";
                    if(p.u === user) color = "var(--ac)";
                    el.innerHTML += `<div class="lb-item"><span class="lb-rank">${i+1}.</span><span class="lb-user" style="color:${color}">${p.u}</span><span class="lb-xp">${p.xp.toLocaleString()} XP</span></div>`;
                });
            }
        };

        const Auth = {
            msg: document.getElementById('msg'),
            toggleReg() {
                const l=document.getElementById('login-form'), r=document.getElementById('reg-form');
                if(l.style.display==='none'){l.style.display='block';r.style.display='none';} else {l.style.display='none';r.style.display='block';}
                this.msg.innerText="";
            },
            login() {
                const u=document.getElementById('u-in').value;
                if(u) { user=u; App.start(); } else { this.msg.innerText="KULLANICI ADI GİRİN"; }
            },
            sendCode() { alert("Simülasyon Modu: Kayıt sistemi devre dışı."); },
            guest(){ user="ZİYARETÇİ"; App.start(); }
        };

        const Mission = {
            current: null,
            pool: [
                { type: 'AI', text: "Yapay Zeka (C.O.R.E.) ile iletişim kur.", xp: 150, diff: 'KOLAY' },
                { type: 'TODO', text: "Yeni bir görev protokolü (ToDo) ekle.", xp: 100, diff: 'KOLAY' },
                { type: 'COMM', text: "Uzaya şifreli bir sinyal gönder.", xp: 200, diff: 'ORTA' },
                { type: 'MANUAL', text: "Manuel sistem bakımını başlat (Butona bas).", xp: 50, diff: 'KOLAY' },
                { type: 'COMMUNITY', text: "Veri Ağına (Community) yeni giriş yap.", xp: 300, diff: 'ZOR' }
            ],
            init() { this.assignNew(); },
            assignNew() {
                const template = this.pool[Math.floor(Math.random() * this.pool.length)];
                this.current = { ...template };
                this.render();
            },
            render() {
                if(!this.current) return;
                const ui = document.getElementById('mission-ui');
                if(!ui) return;
                document.getElementById('m-desc').innerText = this.current.text;
                document.getElementById('m-reward').innerText = `ÖDÜL: ${this.current.xp} XP`;
                const badge = document.getElementById('m-diff');
                badge.innerText = this.current.diff;
                badge.className = `m-badge ${this.current.diff === 'KOLAY' ? 'easy' : (this.current.diff === 'ORTA' ? 'medium' : 'hard')}`;
                
                const btn = document.getElementById('m-action-btn');
                btn.style.display = this.current.type === 'MANUAL' ? 'inline-block' : 'none';
            },
            complete(type) {
                if(this.current && this.current.type === type) {
                    userXP += this.current.xp;
                    App.updateLevel();
                    const ui = document.getElementById('mission-ui');
                    if(ui) ui.style.borderColor = "#0f0";
                    document.getElementById('m-desc').innerText = "GÖREV BAŞARILI! YENİ GÖREV ALINIYOR...";
                    setTimeout(() => { if(ui) ui.style.borderColor = "var(--ac2)"; this.assignNew(); }, 2000);
                }
            }
        };

        const App = {
            start() {
                document.getElementById('gate').style.transform = "translateZ(-500px) rotateX(20deg)";
                document.getElementById('gate').style.opacity = 0;
                setTimeout(()=>{
                    document.getElementById('gate').style.display='none';
                    document.getElementById('os').style.display='grid';
                    setTimeout(()=>document.getElementById('os').style.opacity=1, 100);
                    document.getElementById('op-name').innerText=user.toUpperCase();
                    
                    userXP = UserDB.load(user);
                    this.initAchievements(); Community.init(); Mission.init(); Leaderboard.init(); Media.init();
                    InputHandler.init(); Canvas.init(); this.loop();
                },1000);
            },
            initAchievements() {
                const grid = document.getElementById('ach-list');
                if(!grid) return; grid.innerHTML = "";
                ACHS.forEach((icon, i) => { grid.innerHTML += `<div class="ach-item" id="ach-${i+1}" data-title="Seviye ${i+1}"><i class="fas ${icon}"></i></div>`; });
            },
            loop() {
                const clockEl = document.getElementById('clock');
                if(clockEl) clockEl.innerText=new Date().toLocaleTimeString();
                
                const matrixEl = document.getElementById('matrix-code');
                if(matrixEl) {
                    matrixEl.innerHTML+=["SYS","LINK","DATA","CORE","ERR"][Math.floor(Math.random()*5)]+" ";
                    if(matrixEl.innerHTML.length>300) matrixEl.innerHTML="";
                }

                const cpuEl = document.getElementById('cpu-txt');
                if(cpuEl) cpuEl.innerText = Math.floor(Math.random()*20+5) + "%";
                
                this.updateLevel(); setTimeout(()=>this.loop(),500);
            },
            updateLevel() {
                let lvl = 1;
                for(let i=0; i<LEVELS.length; i++) if(userXP >= LEVELS[i]) lvl = i+1;
                
                const elLvl = document.getElementById('u-lvl'); if(elLvl) elLvl.innerText = lvl;
                const elRank = document.getElementById('u-rank'); if(elRank) elRank.innerText = RANKS[lvl-1] || "TANRI";
                
                let nextGoal = LEVELS[lvl] || userXP*2;
                let progress = (userXP / nextGoal) * 100;
                
                const elBar = document.getElementById('xp-bar'); if(elBar) elBar.style.width = Math.min(progress, 100) + "%";
                const elText = document.getElementById('xp-text'); if(elText) elText.innerText = `${userXP.toLocaleString()} / ${nextGoal.toLocaleString()} XP`;
                const elTarget = document.getElementById('next-lvl-target'); if(elTarget) elTarget.innerText = `SONRAKİ HEDEF: ${nextGoal} XP`;
                
                UserDB.save(user, userXP);
                for(let i=1; i<=10; i++) { const el = document.getElementById(`ach-${i}`); if(el && i <= lvl) el.classList.add('unlocked'); }
            },
            addTodo() {
                SFX.click();
                let v=document.getElementById('todo-in').value; if(!v)return;
                document.getElementById('todo-list').innerHTML+=`<div class="todo-item" onclick="this.remove()"><i class="fas fa-check"></i> <span>${v}</span></div>`;
                document.getElementById('todo-in').value="";
                Mission.complete('TODO');
            }
        };

        const Media = {
            reloadCount: 0,
            init() { setTimeout(() => this.forceReload(), 3000); },
            forceReload() {
                const iframe = document.getElementById('yt-player');
                const overlay = document.getElementById('video-stat');
                const originalSrc = "https://www.youtube.com/embed/K8j7CaMKRF4?autoplay=1&mute=1"; 

                if(overlay) { overlay.innerText = "BAĞLANTI ZORLANIYOR..."; overlay.style.color = "var(--ac2)"; }
                if(iframe) {
                    iframe.src = "about:blank"; 
                    setTimeout(() => {
                        iframe.src = originalSrc + "&t=" + Date.now(); 
                        if(overlay) { overlay.innerText = "BAĞLANTI KURULDU (SIGNAL LOCKED)"; overlay.style.color = "#0f0"; }
                    }, 500);
                }
            }
        };

        const AI = {
            in: document.getElementById('ai-in'), log: document.getElementById('ai-log'),
            async process() {
                let txt = this.in.value; if(!txt) return;
                this.addMsg(txt, 'user'); this.in.value = "";
                const loadID = 'load-'+Date.now();
                this.log.innerHTML += `<div id="${loadID}" class="msg ai"><i class="fas fa-circle-notch fa-spin"></i> C.O.R.E. İşleniyor...</div>`;
                this.log.scrollTop = this.log.scrollHeight;

                if (txt.toLowerCase().includes("çiz") || txt.toLowerCase().includes("oluştur") || txt.toLowerCase().includes("görsel") || txt.toLowerCase().includes("resim")) {
                    const imgUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(txt)}?width=800&height=600&model=flux`;
                    document.getElementById(loadID).remove();
                    this.addMsg(`Görsel oluşturuldu:<br><img src="${imgUrl}" onload="document.getElementById('ai-log').scrollTop=document.getElementById('ai-log').scrollHeight">`, 'ai');
                    Mission.complete('AI');
                    return;
                }

                try {
                    const systemPrompt = `Sen C.O.R.E. isimli, fütüristik bir uzay gemisi yapay zekasısın. Kullanıcı adı: ${user}. Eğer kullanıcı kod isterse, kodu sadece markdown backtick blokları içinde yaz. Kısa ve net ol.`;
                    const finalPrompt = `${systemPrompt} Kullanıcı: ${txt}`;
                    const url = `https://text.pollinations.ai/${encodeURIComponent(finalPrompt)}?model=openai`;
                    const response = await fetch(url);
                    if (!response.ok) throw new Error("Ağ hatası.");
                    let aiText = await response.text();
                    aiText = aiText.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
                    document.getElementById(loadID).remove();
                    this.addMsg(aiText, 'ai');
                    Mission.complete('AI');
                } catch (error) {
                    document.getElementById(loadID).innerHTML = `<span style="color:var(--ac2)">HATA: ${error.message}</span>`;
                }
            },
            addMsg(t, type){ this.log.innerHTML+=`<div class="msg ${type}"><b>${type==='user'?'OP':'AI'}:</b> ${t}</div>`; this.log.scrollTop=this.log.scrollHeight; }
        };

        const Community = {
            dbKey: 'KUZEY_COMM_DB', data: [],
            init() {
                const stored = localStorage.getItem(this.dbKey);
                if (stored) this.data = JSON.parse(stored);
                else {
                    this.data = [
                        {id: 1, title: 'Sistem Güncellemesi v62.1', body: 'Video oynatıcı onarıldı ve kod bütünlüğü sağlandı.', author: 'ADMIN', likes: 42, comments: []},
                        {id: 2, title: 'Mars Rotası', body: 'Kızıl gezegen için en uygun yörünge hesaplamaları paylaşıldı.', author: 'Pilot_Can', likes: 12, comments: []}
                    ];
                    this.save();
                }
                this.render();
            },
            save() { localStorage.setItem(this.dbKey, JSON.stringify(this.data)); },
            togglePostForm() { const el = document.getElementById('comm-form'); el.style.display = el.style.display === 'none' ? 'block' : 'none'; },
            post() {
                const title = document.getElementById('comm-title').value;
                const body = document.getElementById('comm-body').value;
                if(!title || !body) return alert("Veri eksik.");
                const newPost = { id: Date.now(), title: title, body: body, author: user, likes: 0, comments: [] };
                this.data.unshift(newPost); this.save(); this.render();
                document.getElementById('comm-title').value = ""; document.getElementById('comm-body').value = "";
                this.togglePostForm(); Mission.complete('COMMUNITY');
            },
            like(id) { const post = this.data.find(p => p.id === id); if(post) { post.likes++; this.save(); this.render(); } },
            addComment(id) {
                const input = document.getElementById(`comment-in-${id}`); const txt = input.value; if(!txt) return;
                const post = this.data.find(p => p.id === id); if(post) { post.comments.push({author: user, text: txt}); this.save(); this.render(); }
            },
            toggleComments(id) { const el = document.getElementById(`comments-${id}`); el.style.display = el.style.display === 'none' ? 'block' : 'none'; },
            render() {
                const feed = document.getElementById('comm-feed'); if(!feed) return; feed.innerHTML = "";
                this.data.forEach(post => {
                    let commentsHTML = ""; post.comments.forEach(c => { commentsHTML += `<div class="comment-item"><b>${c.author}:</b> ${c.text}</div>`; });
                    feed.innerHTML += `
                        <div class="widget post-card">
                            <div class="post-meta"><span class="post-author"><i class="fas fa-user-astronaut"></i> ${post.author}</span><span>ID: ${post.id}</span></div>
                            <h4 style="color:#fff; margin-bottom:5px;">${post.title}</h4>
                            <div class="post-content">${post.body}</div>
                            <div class="post-actions">
                                <div class="act-btn" onclick="Community.like(${post.id})"><i class="fas fa-heart"></i> ${post.likes}</div>
                                <div class="act-btn" onclick="Community.toggleComments(${post.id})"><i class="fas fa-comment"></i> Yorumlar (${post.comments.length})</div>
                            </div>
                            <div id="comments-${post.id}" class="comments-sec">${commentsHTML}
                                <div style="display:flex; margin-top:10px; gap:5px;">
                                    <input type="text" id="comment-in-${post.id}" placeholder="Yorum ekle..." style="width:100%; background:rgba(0,0,0,0.5); border:1px solid #333; color:#fff; font-size:10px; padding:5px;">
                                    <button onclick="Community.addComment(${post.id})" style="background:var(--ac); border:none; color:#000; font-weight:bold; font-size:10px; padding:0 10px;">OK</button>
                                </div>
                            </div>
                        </div>`;
                });
            }
        };

        const Comm = {
            send() {
                let m = document.getElementById('c-msg').value; let s = document.getElementById('c-stat');
                if(!m) return; 
                s.innerText = "ŞİFRELEME BAŞLATILDI..."; s.style.color = "var(--ac)";
                setTimeout(() => {
                    s.innerText = "SİNYAL UZAYA GÖNDERİLİYOR...";
                    setTimeout(() => {
                        s.innerText = "İLETİM BAŞARILI (200 OK)"; s.style.color = "#0f0"; 
                        document.getElementById('c-msg').value = ""; 
                        Mission.complete('COMM'); userXP += 200; App.updateLevel();
                    }, 1500); 
                }, 1000); 
            }
        };
        
        document.querySelectorAll('button, .nav-icon').forEach(el => el.addEventListener('mouseenter', SFX.hover));
    </script>
</body>
</html>